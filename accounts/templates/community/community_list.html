{% extends "includes/index.html" %}
{% block content %}
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h3>{{ user.username }}</h3>
            <p class="text-white-50">Uniq key: {{ user.get_user_uniq_key }}</p>
        </div>
        <button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#userKeyModal">
            Search by unique key
        </button>
    </div>

    <div class="row g-3 mb-4">
        <div class="col-md-8">
            <input type="text" name="q" class="form-control"
                   placeholder="Search by name or username..."
                   hx-get="{% url 'community-list' %}"
                   hx-trigger="keyup changed delay:500ms"
                   hx-target="#users-table-body"
                   hx-include="[name='status']">
        </div>
        <div class="col-md-4">
            <select name="status" class="form-select"
                    hx-get="{% url 'community-list' %}"
                    hx-trigger="change"
                    hx-target="#users-table-body"
                    hx-include="[name='q']">
                <option value="">All Statuses</option>
                {% for val, label in status_choices %}
                    <option value="{{ val }}">{{ label }}</option>
                {% endfor %}
            </select>
        </div>
    </div>

    <div id="users-table-body">
        {% include "partials/user_table_rows.html" %}
    </div>
</div>
{% include "modals/user_key_modal.html" %}
{% endblock %}