{% extends "includes/index.html" %}
{% block content %}

  {% if event %}
    <div class="container py-4">
    <div class="row g-4 d-flex justify-content-center gap-3">
      <!-- Event header -->
      <div class="card bg-dark text-white shadow-sm mb-4">
        {% include "events/components/event_top.html" %}
      </div>

      <!-- Event details -->
      <div class="card bg-dark text-white shadow-sm mb-4">
        {% include "events/components/event_info.html" %}
      </div>

      <!-- Budget -->
      {% if current_budget %}
        <div class="card bg-dark text-white shadow-sm mb-4">
          <div class="card-body">
            <h5 class="text-secondary mb-4">Event Analytics</h5>

            <div class="row align-items-center">
              <canvas id="burndownChart"
                      style="max-height: 360px;"></canvas>
            </div>
          </div>
        </div>
      {% endif %}


      <div class="card bg-dark text-white shadow-sm mb-4">
        {% include "events/components/event_analytics.html" %}
      </div>
      <div class="d-flex flex-row justify-content- flex-wrap gap-3">
        <!-- Transactions -->
        <div class="card bg-dark text-white shadow-sm mb-4 flex-grow-1">
          {% include "events/components/event_transactions.html" %}
        </div>

        <!-- Members -->
        {% if event.accessibility != "Private" %}
          <div class="card bg-dark text-white shadow-sm mb-4 flex-grow-1">
            {% include "events/components/event_members.html" %}
          </div>
        {% endif %}
        <!-- Connections -->
        {% if event.accessibility != "Private" %}
          <div class="card bg-dark text-white shadow-sm flex-grow-1">
            {% include "events/components/event_connects.html" %}
          </div>
        {% endif %}
      </div>

      <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
      {% include "events/components/script_event_detail.html" %}
    </div>


  {% else %}
    <h3>Oh, well</h3>
    <p>Seems like itâ€™s broken</p>
  {% endif %}
  {% include "modals/user_key_modal.html" %}
  {% include "modals/transaction_modal.html" %}
{% endblock %}
